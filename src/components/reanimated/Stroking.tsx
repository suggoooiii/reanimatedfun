/* eslint-disable react/no-array-index-key */
/* eslint-disable react/react-in-jsx-scope */
import { useEffect } from "react";
import { Dimensions, StyleSheet, View } from "react-native";
import { Easing, useSharedValue, withTiming } from "react-native-reanimated";
import Svg from "react-native-svg";

import AnimatedStroke from "./AnimatedStroke";
import NeuAnimated from "./NeuAnimated";

export default function Stroking() {
  const MARGIN = 40;
  const vWidth = 600;
  const vHeight = 246;
  const width = Dimensions.get("window").width - MARGIN;
  const height = (width * vHeight) / vWidth;
  const path = [
    "M252.65 92H228.025L188.275 22.875H187.712C187.879 25.75 188.025 28.6458 188.15 31.5625C188.275 34.4792 188.4 37.3958 188.525 40.3125C188.65 43.1875 188.775 46.0833 188.9 49V92H171.587V0.625H196.025L235.712 69.0625H236.15C236.067 66.2292 235.962 63.4167 235.837 60.625C235.712 57.8333 235.587 55.0417 235.462 52.25C235.379 49.4583 235.296 46.6667 235.212 43.875V0.625H252.65V92ZM321.938 92H269.312V0.625H321.938V16.5H288.688V36.5625H319.625V52.4375H288.688V76H321.938V92ZM409.037 0.625V59.75C409.037 66.0417 407.642 71.7292 404.85 76.8125C402.1 81.8542 397.912 85.8542 392.287 88.8125C386.704 91.7708 379.662 93.25 371.162 93.25C359.079 93.25 349.871 90.1667 343.537 84C337.204 77.8333 334.037 69.6667 334.037 59.5V0.625H353.35V56.5625C353.35 64.1042 354.892 69.3958 357.975 72.4375C361.058 75.4792 365.621 77 371.662 77C375.912 77 379.35 76.2708 381.975 74.8125C384.642 73.3542 386.6 71.1042 387.85 68.0625C389.1 65.0208 389.725 61.1458 389.725 56.4375V0.625H409.037ZM75.7375 123.625V182.75C75.7375 189.042 74.3417 194.729 71.55 199.812C68.8 204.854 64.6125 208.854 58.9875 211.812C53.4042 214.771 46.3625 216.25 37.8625 216.25C25.7792 216.25 16.5708 213.167 10.2375 207C3.90415 200.833 0.737488 192.667 0.737488 182.5V123.625H20.05V179.562C20.05 187.104 21.5917 192.396 24.675 195.438C27.7583 198.479 32.3208 200 38.3625 200C42.6125 200 46.05 199.271 48.675 197.812C51.3417 196.354 53.3 194.104 54.55 191.062C55.8 188.021 56.425 184.146 56.425 179.438V123.625H75.7375ZM129.9 143.812C137.358 143.812 143.358 145.854 147.9 149.938C152.442 153.979 154.712 160.479 154.712 169.438V215H135.65V174.188C135.65 169.188 134.733 165.417 132.9 162.875C131.108 160.333 128.275 159.062 124.4 159.062C118.567 159.062 114.587 161.042 112.462 165C110.337 168.958 109.275 174.667 109.275 182.125V215H90.2125V145.125H104.775L107.337 154.062H108.4C109.9 151.646 111.754 149.688 113.962 148.188C116.212 146.688 118.692 145.583 121.4 144.875C124.15 144.167 126.983 143.812 129.9 143.812ZM187 145.125V215H167.937V145.125H187ZM177.5 117.75C180.333 117.75 182.771 118.417 184.812 119.75C186.854 121.042 187.875 123.479 187.875 127.062C187.875 130.604 186.854 133.062 184.812 134.438C182.771 135.771 180.333 136.438 177.5 136.438C174.625 136.438 172.167 135.771 170.125 134.438C168.125 133.062 167.125 130.604 167.125 127.062C167.125 123.479 168.125 121.042 170.125 119.75C172.167 118.417 174.625 117.75 177.5 117.75ZM217.287 215L190.662 145.125H210.6L224.1 184.938C224.85 187.271 225.433 189.729 225.85 192.312C226.308 194.896 226.621 197.208 226.787 199.25H227.287C227.412 197.042 227.704 194.688 228.162 192.188C228.662 189.688 229.308 187.271 230.1 184.938L243.537 145.125H263.475L236.85 215H217.287ZM295.95 143.812C302.408 143.812 307.971 145.062 312.637 147.562C317.304 150.021 320.908 153.604 323.45 158.312C325.992 163.021 327.262 168.771 327.262 175.562V184.812H282.2C282.408 190.188 284.012 194.417 287.012 197.5C290.054 200.542 294.262 202.062 299.637 202.062C304.096 202.062 308.179 201.604 311.887 200.688C315.596 199.771 319.408 198.396 323.325 196.562V211.312C319.867 213.021 316.242 214.271 312.45 215.062C308.7 215.854 304.137 216.25 298.762 216.25C291.762 216.25 285.554 214.958 280.137 212.375C274.762 209.792 270.533 205.854 267.45 200.562C264.408 195.271 262.887 188.604 262.887 180.562C262.887 172.396 264.262 165.604 267.012 160.188C269.804 154.729 273.679 150.646 278.637 147.938C283.596 145.188 289.367 143.812 295.95 143.812ZM296.075 157.375C292.367 157.375 289.283 158.562 286.825 160.938C284.408 163.312 283.012 167.042 282.637 172.125H309.387C309.346 169.292 308.825 166.771 307.825 164.562C306.867 162.354 305.408 160.604 303.45 159.312C301.533 158.021 299.075 157.375 296.075 157.375ZM375.362 143.812C376.321 143.812 377.425 143.875 378.675 144C379.967 144.083 381.008 144.208 381.8 144.375L380.362 162.25C379.737 162.042 378.842 161.896 377.675 161.812C376.55 161.688 375.571 161.625 374.737 161.625C372.279 161.625 369.883 161.938 367.55 162.562C365.258 163.188 363.196 164.208 361.362 165.625C359.529 167 358.071 168.833 356.987 171.125C355.946 173.375 355.425 176.146 355.425 179.438V215H336.362V145.125H350.8L353.612 156.875H354.55C355.925 154.5 357.633 152.333 359.675 150.375C361.758 148.375 364.112 146.792 366.737 145.625C369.404 144.417 372.279 143.812 375.362 143.812ZM436.837 194.25C436.837 199 435.712 203.021 433.462 206.312C431.254 209.562 427.942 212.042 423.525 213.75C419.108 215.417 413.608 216.25 407.025 216.25C402.15 216.25 397.962 215.938 394.462 215.312C391.004 214.688 387.504 213.646 383.962 212.188V196.438C387.754 198.146 391.817 199.562 396.15 200.688C400.525 201.771 404.358 202.312 407.65 202.312C411.358 202.312 414.004 201.771 415.587 200.688C417.212 199.562 418.025 198.104 418.025 196.312C418.025 195.146 417.692 194.104 417.025 193.188C416.4 192.229 415.025 191.167 412.9 190C410.775 188.792 407.442 187.229 402.9 185.312C398.525 183.479 394.921 181.625 392.087 179.75C389.296 177.875 387.212 175.667 385.837 173.125C384.504 170.542 383.837 167.271 383.837 163.312C383.837 156.854 386.337 152 391.337 148.75C396.379 145.458 403.108 143.812 411.525 143.812C415.858 143.812 419.983 144.25 423.9 145.125C427.858 146 431.921 147.396 436.087 149.312L430.337 163.062C426.879 161.562 423.608 160.333 420.525 159.375C417.483 158.417 414.379 157.938 411.212 157.938C408.421 157.938 406.317 158.312 404.9 159.062C403.483 159.812 402.775 160.958 402.775 162.5C402.775 163.625 403.129 164.625 403.837 165.5C404.587 166.375 406.004 167.354 408.087 168.438C410.212 169.479 413.317 170.833 417.4 172.5C421.358 174.125 424.796 175.833 427.712 177.625C430.629 179.375 432.879 181.562 434.462 184.188C436.046 186.771 436.837 190.125 436.837 194.25ZM464.375 145.125V215H445.312V145.125H464.375ZM454.875 117.75C457.708 117.75 460.146 118.417 462.188 119.75C464.229 121.042 465.25 123.479 465.25 127.062C465.25 130.604 464.229 133.062 462.188 134.438C460.146 135.771 457.708 136.438 454.875 136.438C452 136.438 449.542 135.771 447.5 134.438C445.5 133.062 444.5 130.604 444.5 127.062C444.5 123.479 445.5 121.042 447.5 119.75C449.542 118.417 452 117.75 454.875 117.75ZM507.475 201.062C509.558 201.062 511.579 200.854 513.537 200.438C515.537 200.021 517.517 199.5 519.475 198.875V213.062C517.433 213.979 514.892 214.729 511.85 215.312C508.85 215.938 505.558 216.25 501.975 216.25C497.808 216.25 494.058 215.583 490.725 214.25C487.433 212.875 484.829 210.521 482.912 207.188C481.037 203.812 480.1 199.125 480.1 193.125V159.438H470.975V151.375L481.475 145L486.975 130.25H499.162V145.125H518.725V159.438H499.162V193.125C499.162 195.792 499.912 197.792 501.412 199.125C502.954 200.417 504.975 201.062 507.475 201.062ZM517.263 145.125H538.138L551.325 184.438C551.742 185.688 552.096 186.958 552.388 188.25C552.679 189.542 552.929 190.875 553.138 192.25C553.346 193.625 553.513 195.062 553.638 196.562H554.013C554.263 194.312 554.596 192.208 555.013 190.25C555.471 188.292 556.033 186.354 556.7 184.438L569.638 145.125H590.075L560.513 223.938C558.721 228.771 556.388 232.792 553.513 236C550.638 239.25 547.325 241.688 543.575 243.312C539.867 244.938 535.783 245.75 531.325 245.75C529.158 245.75 527.283 245.625 525.7 245.375C524.117 245.167 522.763 244.938 521.638 244.688V229.562C522.513 229.771 523.617 229.958 524.95 230.125C526.283 230.292 527.679 230.375 529.138 230.375C531.804 230.375 534.096 229.812 536.013 228.688C537.929 227.562 539.533 226.042 540.825 224.125C542.117 222.25 543.138 220.188 543.888 217.938L545.013 214.5L517.263 145.125Z",
  ];

  const styles = StyleSheet.create({
    layer: {
      ...StyleSheet.absoluteFillObject,
      flex: 1,
      justifyContent: "center",
      alignItems: "center",
    },
  });

  const progress = useSharedValue(0);
  useEffect(() => {
    progress.value = withTiming(1, {
      duration: 4000,
      easing: Easing.linear,
    });
    // stroke.value = 3;
  }, [progress]);
  return (
    <View style={styles.layer}>
      <View style={styles.layer}>
        <NeuAnimated progress={progress} />
      </View>
      <Svg
        width={width}
        height={height}
        viewBox={[
          -MARGIN / 2,
          -MARGIN / 2,
          vWidth + MARGIN / 2,
          vHeight + MARGIN / 2,
        ].join(" ")}
      >
        <>
          {path.map((d, key) => (
            <AnimatedStroke progress={progress} d={d} key={key} />
          ))}
        </>
      </Svg>
    </View>
  );
}
